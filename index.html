<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bit World Game</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body, html {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #gameCanvas {
      display: block;
      width: 100%;
      height: 100%;
      cursor: crosshair;
      background: #1a1a2e;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>

  <script type="module">
    import { initGame } from './src/main.js';

    // 右クリックメニューを無効化
    document.addEventListener('contextmenu', (e) => {
      e.preventDefault();
    });

    // Canvas をウィンドウサイズに合わせる
    const canvas = document.getElementById('gameCanvas');
    function resizeCanvas() {
      const dpr = window.devicePixelRatio || 1;
      canvas.width = window.innerWidth * dpr;
      canvas.height = window.innerHeight * dpr;

      // CSS上のサイズは従来通り
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';

      // DPRをcanvasに保存(描画時に使用)
      canvas.dpr = dpr;
    }

    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // ゲーム初期化
    const game = initGame(canvas);

    // グローバルに公開(デバッグ用)
    window.game = game;
  </script>
</body>
</html>
